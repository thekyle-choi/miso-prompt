---
name: miso-qa-eval
description: MISO QA 테스트 결과를 LLM-as-Judge 방식으로 평가합니다. 고도화된 평가 기준으로 PASS/PARTIAL/FAIL 판정합니다.
argument-hint: "[파일명]"
user-invocable: true
---

# MISO QA 평가 (LLM-as-Judge)

테스트 결과 파일을 읽고 다차원 평가 기준으로 분석하여 판정합니다.

## 사용법

```
/miso-qa-eval                           # results/raw/ 전체 평가
/miso-qa-eval 20260126_F-01_gs25.md     # 특정 파일 평가
```

## 실행 흐름

```
1. results/raw/에서 미평가 파일 로드
2. 각 파일별로 LLM-as-Judge 평가 수행
3. Chain-of-Thought 방식으로 단계별 분석
4. 최종 판정 (PASS/PARTIAL/FAIL)
5. results/passed/ 또는 results/review/로 이동
6. results/summary.md 업데이트
```

## 평가 프레임워크 (LLM-as-Judge)

### 평가 원칙
1. **Chain-of-Thought**: 각 기준별로 근거를 먼저 분석한 후 점수 부여
2. **기준 분리**: 각 평가 기준은 독립적으로 평가
3. **구체적 증거**: 대화 로그에서 구체적인 증거 인용
4. **일관된 척도**: 1-5점 척도로 정량화

---

## 평가 기준 (6개 차원)

### 1. Relevancy (응답 관련성) - 가중치 20%
응답이 사용자 입력에 적절하게 대응하는지 평가

| 점수 | 기준 |
|-----|------|
| 5 | 질문의 모든 측면에 정확히 대응, 추가 유용한 정보 제공 |
| 4 | 질문에 충분히 대응, 핵심 내용 포함 |
| 3 | 기본적인 대응, 일부 누락 |
| 2 | 부분적으로만 관련, 핵심 누락 |
| 1 | 질문과 무관한 응답 |

**평가 포인트**:
- form 질문에 맞는 선택지 제공 여부
- 사용자 의도 파악 정확성
- 불필요한 정보 없이 핵심 전달

### 2. Coherence (일관성) - 가중치 15%
대화 전반에서 논리적 흐름과 일관성 유지

| 점수 | 기준 |
|-----|------|
| 5 | 완벽한 논리적 흐름, 이전 맥락 완벽 반영 |
| 4 | 일관된 흐름, 맥락 잘 유지 |
| 3 | 대체로 일관, 가끔 맥락 이탈 |
| 2 | 자주 맥락 이탈, 혼란 유발 |
| 1 | 비논리적, 모순된 응답 |

**평가 포인트**:
- 이전 대화 내용 기억/참조
- 워크플로우 스테이지 간 연결성
- 정보 수집 내용의 일관된 활용

### 3. Helpfulness (유용성) - 가중치 20%
사용자가 목표 달성(앱 기획)에 실질적 도움을 받는지

| 점수 | 기준 |
|-----|------|
| 5 | 목표 달성에 결정적 기여, 기대 초과 |
| 4 | 목표 달성에 충분한 도움 |
| 3 | 기본적인 도움, 추가 노력 필요 |
| 2 | 제한적 도움, 많은 보완 필요 |
| 1 | 도움이 안 됨, 방해 |

**평가 포인트**:
- PRD 생성까지 효과적으로 가이드
- 기술적 제약사항 적절한 안내
- Feasibility 판정의 합리성

### 4. Tone Adherence (톤 준수) - 가중치 15%
설정된 에이전트 역할(Ally/Kyle)에 맞는 톤 유지

| 점수 | 기준 |
|-----|------|
| 5 | 완벽한 역할 수행, 일관된 톤, 적절한 이모지 |
| 4 | 역할에 맞는 톤, 가끔 변동 |
| 3 | 대체로 적절, 일부 부자연스러움 |
| 2 | 역할 불일치, 톤 불안정 |
| 1 | 완전히 다른 톤, 역할 이탈 |

**평가 포인트**:
- Ally: 친근하고 공감적, 이모지 활용
- Kyle: 전문적이고 체계적
- 에이전트 전환 시 톤 변화 자연스러움

### 5. Error Handling (오류 처리) - 가중치 15%
비정상 입력이나 예외 상황에 대한 대응 품질

| 점수 | 기준 |
|-----|------|
| 5 | 모든 예외를 우아하게 처리, 사용자 혼란 없음 |
| 4 | 대부분의 예외 잘 처리 |
| 3 | 기본적인 오류 처리, 일부 미흡 |
| 2 | 오류 처리 불충분, 사용자 혼란 |
| 1 | 오류 시 비정상 동작, 크래시 |

**평가 포인트**:
- 폼 외 입력 시 적절한 안내
- 빈값/특수문자 입력 처리
- 불가능한 요청에 대한 합리적 설명

### 6. Task Completion (작업 완료) - 가중치 15%
테스트 목적 달성 및 워크플로우 완료

| 점수 | 기준 |
|-----|------|
| 5 | 모든 스테이지 완료, PRD 생성 성공 |
| 4 | 핵심 스테이지 완료, PRD 생성 |
| 3 | 일부 스테이지 완료, PRD 미완성 |
| 2 | 중간에 막힘, 진행 어려움 |
| 1 | 초기 단계에서 실패 |

**평가 포인트**:
- 문제정의 → PRD생성 전체 흐름 완료
- 각 스테이지별 필수 정보 수집
- Ally→Kyle 핸드오프 정상 동작

---

## 테스트 유형별 추가 기준

### F (정상 플로우)
- 모든 스테이지 순차 진행
- PRD 생성 완료 필수

### E (예외 처리)
- Error Handling 점수 2배 가중치
- 예외 상황별 적절한 복구

### C (흐름 제어)
- Coherence 점수 2배 가중치
- 흐름 변경 후 정상 복귀

### B (경계값)
- Task Completion 기준 완화
- 한계 상황에서의 안정성 중시

### U (사용성)
- Helpfulness 점수 2배 가중치
- 명확화 유도 능력 평가

---

## 최종 판정

### 점수 계산
```
총점 = (Relevancy × 0.20) + (Coherence × 0.15) + (Helpfulness × 0.20)
     + (Tone × 0.15) + (ErrorHandling × 0.15) + (TaskCompletion × 0.15)
```

### 판정 기준
| 판정 | 조건 |
|-----|------|
| **PASS** | 총점 4.0 이상 AND 모든 항목 3점 이상 |
| **PARTIAL** | 총점 2.5~3.9 OR 1개 항목 2점 |
| **FAIL** | 총점 2.5 미만 OR 2개 이상 항목 2점 이하 |

---

## 결과 파일 형식

### 평가 완료 후 파일 형식
```markdown
# 평가 결과: {테스트ID} - {주제}

**평가일시**: YYYY-MM-DD HH:MM:SS
**최종 판정**: PASS/PARTIAL/FAIL
**총점**: X.XX / 5.00

---

## 평가 상세 (Chain-of-Thought)

### 1. Relevancy (X/5)
**분석**: [대화에서의 구체적 증거와 분석]
**점수 근거**: [왜 이 점수인지]

### 2. Coherence (X/5)
**분석**: ...
**점수 근거**: ...

### 3. Helpfulness (X/5)
**분석**: ...
**점수 근거**: ...

### 4. Tone Adherence (X/5)
**분석**: ...
**점수 근거**: ...

### 5. Error Handling (X/5)
**분석**: ...
**점수 근거**: ...

### 6. Task Completion (X/5)
**분석**: ...
**점수 근거**: ...

---

## 점수 요약

| 기준 | 점수 | 가중치 | 가중점수 |
|-----|------|-------|---------|
| Relevancy | X | 20% | X.XX |
| Coherence | X | 15% | X.XX |
| Helpfulness | X | 20% | X.XX |
| Tone Adherence | X | 15% | X.XX |
| Error Handling | X | 15% | X.XX |
| Task Completion | X | 15% | X.XX |
| **총점** | | | **X.XX** |

---

## 주요 발견 사항
- 강점: ...
- 개선점: ...
- 특이사항: ...

---

## 원본 테스트 로그
(results/raw/의 원본 내용 포함)
```

### 저장 위치
- PASS → `results/passed/`
- PARTIAL/FAIL → `results/review/`

---

## summary.md 업데이트

평가 완료 후 `results/summary.md` 업데이트:

```markdown
# MISO QA 테스트 현황

**최종 업데이트**: YYYY-MM-DD HH:MM:SS

## 통계
| 항목 | 값 |
|-----|-----|
| 총 테스트 | N |
| PASS | N (%) |
| PARTIAL | N (%) |
| FAIL | N (%) |
| 평균 점수 | X.XX |

## 기준별 평균
| 기준 | 평균 점수 |
|-----|----------|
| Relevancy | X.XX |
| Coherence | X.XX |
| Helpfulness | X.XX |
| Tone Adherence | X.XX |
| Error Handling | X.XX |
| Task Completion | X.XX |

## 최근 평가
| 일시 | 테스트 | 총점 | 판정 |
|-----|-------|-----|------|
| | | | |

## 주요 이슈 패턴
- 이슈 1 (발생 횟수)
- 이슈 2 (발생 횟수)
```

---

## 참고 자료

평가 프레임워크는 다음 LLM Evaluation 연구를 참고:
- LLM-as-a-Judge (Confident AI)
- Multi-dimensional evaluation criteria
- Chain-of-Thought reasoning for evaluation
